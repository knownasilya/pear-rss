{"version":3,"file":"NodeSocket.js","names":["Socket","_interopRequireWildcard","require","Channel","Context","Effect","FiberRef","FiberSet","Layer","Option","Queue","Scope","Net","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","NetSocket","exports","GenericTag","EOF","Symbol","for","makeNet","options","fromDuplex","acquireRelease","async","resume","conn","createConnection","on","removeAllListeners","succeed","error","fail","SocketGenericError","reason","sync","destroy","closed","destroySoon","open","currentSendQueueCapacity","pipe","flatMap","sendQueueCapacity","dropping","bindTo","bind","context","map","openContext","sendQueue","run","handler","scope","provide","add","_","make","fiberSet","runtime","provideService","tap","take","chunk","isCloseEvent","code","Error","undefined","end","void","write","forever","withUnhandledErrorLogLevel","none","onEnd","onError","onClose","hadError","SocketCloseError","off","raceFirst","join","scoped","interruptible","offer","writer","of","TypeId","runRaw","makeNetChannel","unwrapScoped","toChannelWith","layerNet","effect"],"sources":["../../src/NodeSocket.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}