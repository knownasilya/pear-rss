{"version":3,"file":"httpServer.js","names":["Etag","_interopRequireWildcard","require","MultipartNode","Cookies","FileSystem","App","IncomingMessage","Server","Error","ServerRequest","Socket","Config","Effect","FiberSet","Layer","Option","Scope","Stream","Http","_nodeStream","_promises","WS","NodeContext","NodeSink","_httpIncomingMessage","internalPlatform","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","evaluate","options","gen","_","scope","server","acquireRelease","sync","async","resume","listening","void","close","error","die","onError","fail","ServeError","on","listen","off","address","wss","WebSocketServer","noServer","extend","cached","_tag","path","hostname","port","serve","httpApp","middleware","handler","makeHandler","upgradeHandler","makeUpgradeHandler","addFinalizer","pipe","locally","maxBodySize","some","Size","exports","handledApp","toHandled","handleResponse","map","makeRuntime","runFork","nodeRequest","nodeResponse","fiber","provideService","HttpServerRequest","ServerRequestImpl","writableEnded","unsafeInterruptAsFork","clientAbortFiberId","lazyWss","socket","head","nodeResponse_","undefined","ServerResponse","assignSocket","upgradeEffect","fromWebSocket","flatMap","handleUpgrade","ws","succeed","HttpIncomingMessageImpl","source","response","url","headersOverride","TypeId","constructor","remoteAddressOverride","RequestError","request","reason","cachedCookies","cookies","parseHeader","headers","cookie","resolvedResponse","modify","remoteAddress","originalUrl","method","toUpperCase","multipartEffect","multipart","runSync","persisted","multipartStream","stream","upgrade","toString","toJSON","inspect","_id","layerServer","scoped","HttpServer","layer","mergeAll","layerWeak","layerConfig","unwrap","suspend","isEmpty","toSet","toSetCookieHeaders","push","writeHead","status","end","body","tryPromise","try","signal","pipeline","catch","ResponseError","interruptible","tapErrorCause","handleCause","Response","formData","fromEntries","Readable","fromWeb","once","run","mapError","fromWritable","cause","causeResponse","headersSent","failCause","requestSource","self"],"sources":["../../../src/internal/httpServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}